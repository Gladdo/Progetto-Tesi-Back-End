accelerate launch --num_cpu_threads_per_process=2 "./kohya-scripts/train_network.py" --pretrained_model_name_or_path="runwayml/stable-diffusion-v1-5" --train_data_dir="./training-input/${1}/image" --resolution="512,512" --output_dir="./training-output/model" --logging_dir="./training-output/log" --network_alpha="128" --save_model_as=safetensors --network_module=networks.lora --text_encoder_lr=5e-05 --unet_lr=0.0001 --network_dim=128 --output_name="${1}" --lr_scheduler_num_cycles="1" --no_half_vae --learning_rate="0.0001" --lr_scheduler="constant" --train_batch_size="1" --max_train_steps="1500" --save_every_n_epochs="1" --mixed_precision="fp16" --save_precision="fp16" --seed="1234" --caption_extension=".txt" --cache_latents --optimizer_type="AdamW" --max_data_loader_n_workers="1" --clip_skip=2 --bucket_reso_steps=64 --mem_eff_attn --gradient_checkpointing --xformers --bucket_no_upscale --noise_offset=0.0
python3 post-back.py ${1} ${admin_username} ${admin_password}
rm -r training-input/${1}
rm -r training-output/model/${1}.safetensors
